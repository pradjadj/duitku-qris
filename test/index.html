<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QRIS Payment Test</title>
    <style>
        /* Modern black and white theme */
        .duitku-qris-container {
            max-width: 600px;
            margin: 2em auto;
            padding: 2em;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .duitku-qris-header {
            text-align: center;
            margin-bottom: 2em;
            border-bottom: 2px solid #f3f4f6;
            padding-bottom: 1em;
        }

        .duitku-qris-header h2 {
            font-size: 1.5rem;
            color: #111827;
            font-weight: 600;
            margin-bottom: 0.5em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .duitku-qris-amount {
            font-size: 2rem;
            font-weight: 700;
            color: #111827;
            text-align: center;
            margin: 1em 0;
            padding: 0.5em;
            background: #f8f9fa;
            border-radius: 8px;
        }

        #duitku-qris-qrcode {
            text-align: center;
            margin: 2em auto;
            padding: 1.5em;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            max-width: 256px;
            border: 2px solid #f3f4f6;
        }

        #duitku-qris-timer {
            text-align: center;
            font-size: 1rem;
            color: #374151;
            margin: 1em 0;
            font-weight: 500;
            padding: 0.75em;
            background: #f3f4f6;
            border-radius: 6px;
        }

        #duitku-qris-status {
            text-align: center;
            margin: 1.5em 0;
        }

        .duitku-qris-instructions {
            margin: 2em 0;
            padding: 1.5em;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .duitku-qris-instructions h3 {
            color: #111827;
            font-size: 1.1rem;
            margin-bottom: 1em;
            font-weight: 600;
        }

        .duitku-qris-instructions ol {
            margin: 0;
            padding-left: 1.5em;
            counter-reset: item;
        }

        .duitku-qris-instructions li {
            margin: 0.75em 0;
            color: #374151;
            position: relative;
            padding-left: 0.5em;
            line-height: 1.5;
        }

        .woocommerce-notice {
            padding: 1em 1.5em;
            margin: 1em 0;
            border-radius: 8px;
            font-weight: 500;
            text-align: center;
        }

        .woocommerce-notice--success {
            background: #f0fdf4;
            color: #166534;
            border: 1px solid #dcfce7;
        }

        .woocommerce-notice--error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fee2e2;
        }

        @media (max-width: 768px) {
            .duitku-qris-container {
                margin: 1em;
                padding: 1.5em;
            }
            
            .duitku-qris-header h2 {
                font-size: 1.25rem;
            }
            
            .duitku-qris-amount {
                font-size: 1.5rem;
            }

            #duitku-qris-qrcode {
                padding: 1em;
            }

            .duitku-qris-instructions {
                padding: 1em;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="duitku-qris-container">
        <div class="duitku-qris-header">
            <h2>Silahkan Scan QRIS berikut ini</h2>
        </div>

        <div class="duitku-qris-amount">
            Nominal Pembayaran: Rp 150,000
        </div>

        <div id="duitku-qris-qrcode"></div>

        <div id="duitku-qris-timer">
            Batas waktu pembayaran: 10:00
        </div>

        <div id="duitku-qris-status"></div>

        <div class="duitku-qris-instructions">
            <h3>Cara Pembayaran:</h3>
            <ol>
                <li>Buka aplikasi e-wallet atau mobile banking yang mendukung QRIS</li>
                <li>Pilih menu Scan QR atau QRIS</li>
                <li>Scan QR Code yang ditampilkan di atas</li>
                <li>Periksa detail transaksi pada aplikasi Anda</li>
                <li>Masukkan PIN atau password untuk konfirmasi pembayaran</li>
                <li>Pembayaran selesai, halaman akan otomatis dialihkan</li>
            </ol>
        </div>
    </div>

    <script>
        // Test QR string
        var qrString = "00020101021226660014ID.DANA.WWW011893600911002151500102152006170915150010303UME51450015ID.OR.GPNQR.WWW02150000000000000000303UME520454995802ID5911Toko Jualan6013Jakarta Barat61051153062210117LQKI2LPMJQPKCIIS553033605405400006304502A";
        var orderId = "123";
        var expiryTime = Math.floor(Date.now() / 1000) + 600; // 10 minutes from now

        // Initialize QR code on page load
        document.addEventListener('DOMContentLoaded', function() {
            new QRCode(document.getElementById("duitku-qris-qrcode"), {
                text: qrString,
                width: 256,
                height: 256,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            // Start timer
            var timerElement = document.getElementById('duitku-qris-timer');
            var timerInterval = setInterval(function() {
                var now = Math.floor(Date.now() / 1000);
                var timeLeft = expiryTime - now;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerElement.innerHTML = 'Waktu pembayaran telah berakhir';
                    document.getElementById('duitku-qris-status').innerHTML = 
                        '<div class="woocommerce-notice woocommerce-notice--error">Waktu pembayaran telah berakhir. Silakan buat pesanan baru.</div>';
                    return;
                }

                var minutes = Math.floor(timeLeft / 60);
                var seconds = timeLeft % 60;
                timerElement.innerHTML = 'Sisa waktu: ' + 
                    minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            }, 1000);

            // Simulate payment success after 5 seconds (for testing)
            setTimeout(function() {
                document.getElementById('duitku-qris-status').innerHTML = 
                    '<div class="woocommerce-notice woocommerce-notice--success">Pembayaran berhasil! Mengalihkan...</div>';
            }, 5000);
        });
    </script>
</body>
</html>
